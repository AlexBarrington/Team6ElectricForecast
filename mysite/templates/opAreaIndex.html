<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
Design by TEMPLATED
http://templated.co
Released for free under the Creative Commons Attribution License

Name       : Skeleton
Description: A two-column, fixed-width design with dark color scheme.
Version    : 1.0
Released   : 20130902

-->
{% extends "layout.html" %}
{% block statics %}
{% load staticfiles %}
<link href="{% static "css/default.css" %}" rel="stylesheet" type="text/css" media="all" />
<link href="{% static "css/fonts.css" %}" rel="stylesheet" type="text/css" media="all" />

<!--[if IE 6]><link href="default_ie6.css" rel="stylesheet" type="text/css" /><![endif]-->
{% endblock %}
		{% block content %}
<body>
   <script src="/static/js/papaparse.js"></script>
   <script src="/static/js/jquery-1.11.3.js"></script>
   <script src="/static/js/dygraph.js"></script>

<!--   <div>
	<input type = "file" id="fileInput">
` </div> -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.min.js"></script>
  <script>
	  
	var opArea = "{{ opArea }}"
	var url = "http://127.0.0.1:8000/data/" + opArea + "/"
	
	function doStuff(data){
		console.log("made it to the callback")
		
		var data = 
			
		
		 $(document).ready(function () {
      new Dygraph(
          document.getElementById("load"),
          data,
          {
            customBars: true,
            title: 'Load for {{ opArea }}',
            ylabel: 'Load (MW)',
            legend: 'always',
            labelsDivStyles: { 'textAlign': 'right' },
            showRangeSelector: true
          }
      );
      new Dygraph(
          document.getElementById("temp"),
          data,
          {
            
            customBars: true,
            title: 'Temperatures for {{ opArea }}',
            ylabel: 'Temperature (F)',
            legend: 'always',
            labelsDivStyles: { 'textAlign': 'right' },
            showRangeSelector: true,
            rangeSelectorHeight: 30,
            rangeSelectorPlotStrokeColor: 'green',
            rangeSelectorPlotFillColor: 'lightgreen'
          });
		  
		  new Dygraph(
          document.getElementById("windSpeed"),
          data,
          {
            
            customBars: true,
            title: 'Wind Speed for {{opArea}}',
            ylabel: 'Wind Speed (mph)',
            legend: 'always',
            labelsDivStyles: { 'textAlign': 'right' },
            showRangeSelector: true,
            rangeSelectorHeight: 30,
            rangeSelectorPlotStrokeColor: 'yellow',
            rangeSelectorPlotFillColor: 'lightyellow'
          });
    }
);
	
	}
	function parseData(url, callback){
		console.log("made it to js")
		Papa.parse(url, {
			download: true,
			dynamicTyping: true,
			complete: function(results){
				callback(results.data);
			}
		});
	}
	
	parseData(url, doStuff)
  </script>
   <script type="text/javascript">

   
     window.onload = generateRandomNumber;
     function generateRandomNumber(){
         var n = 25;
         var number = Math.floor(Math.random()*n)+1;
         document.getElementById("randomNumber").innerHTML = n;
         var actualLoadDataSet = [];
		 var forecastLoadDataSet = [];
		 var indexNum = 0;
		 var sum	= 0;
		 var count = 1;
		 var i=0;
		 var k=3;
		 var actual = 0;
		 var forecast = 0;
		for(i =0;i!=5;i++)
		{
			actualLoadDataSet [i] = i+1;
		}
		for(k =0;k!=5;k++)
		{
			forecastLoadDataSet [k] = k+3;
		}
		i=0;
		k=0;
		for(count=0;count<5;count++)
		{
			actual = actualLoadDataSet[count];
			forecast = forecastLoadDataSet[count];

			sum += (Math.abs(forecast - actual)/actual);
		}

		var answer = sum / count;
		document.getElementById("randomNumber").innerHTML = answer;
     }
  </script>
</body>
<div id="load" style="width:600px; height:300px;"></div>
<p><br><br><br></p>
<div id="temp" style="width:600px; height:300px;"></div>
<p><br><br><br></p>
<div id="windSpeed" style="width:600px; height:300px;"></div>
		<div id="welcome">
			<div class="title">
				<p><br><br><br><br></p>
				<h2>{{ pageTitle }}</h2>
				<span class="byline">{{ opArea }}</span>
			</div>
			<p>This is <strong>{{ opArea }}</strong>, showing the contrast between forecasted and actual electrical load</p>
			<ul class="actions">
				<li><a href="#" class="button"></a></li>
			</ul>
		</div>
		<div id="featured">
			<div class="title">
				<h2>Statistics</h2>
				<span class="byline">A quick look at how {{ opArea }} is doing</span>
			</div>
			<table style="width:100%">
				<tr>
				<td><b> </b></td>
				<td><b>Load</b></td>
				<td><b>Temperature</b></td>
				<td><b>Wind</b></td>
			  </tr>
			  <tr>
				<td><b>Mean Absolute % Error</b></td>
				<td><h1 id="randomNumber"></h1></td>
				<td>RANDOM NUMBER</td>
			  	<td>RANDOM NUMBER</td>
			  </tr>
			</table>
		</div>
		{% endblock %}
		{% block copyright %}
		<div id="copyright">
			<span>&copy; Untitled. All rights reserved. | Design by <a href="http://templated.co" rel="nofollow">TEMPLATED</a>.</span>
		</div>
		{% endblock %}
	</div>
</div>
</body>
</html>
